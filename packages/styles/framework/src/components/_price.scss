@use "sass:list";
@use "../base/color";
@use "../utilities/initial-variables";
@use "../utilities/spacing";

$price-levels: (
  [initial-variables.$text-64, initial-variables.$text-44, initial-variables.$text-28, initial-variables.$text-16],
  [initial-variables.$text-56, initial-variables.$text-32, initial-variables.$text-22, initial-variables.$text-16],
  [initial-variables.$text-48, initial-variables.$text-28, initial-variables.$text-16, initial-variables.$text-16],
  [initial-variables.$text-40, initial-variables.$text-24, initial-variables.$text-10, initial-variables.$text-10],
  [initial-variables.$text-36, initial-variables.$text-20, initial-variables.$text-10, initial-variables.$text-10],
  [initial-variables.$text-24, initial-variables.$text-20, initial-variables.$text-10, initial-variables.$text-10],
  [initial-variables.$text-20, initial-variables.$text-20, initial-variables.$text-10, initial-variables.$text-10],
);

.price-container {
  display: flex;
  align-items: baseline;
  column-gap: 12px;
  flex-wrap: wrap;
  --font-size: #{initial-variables.$text-64};

  @each $price-level in $price-levels {
    $i: list.index($price-levels, $price-level);
    $font-size: list.nth($price-level, 1);
    $strike-font-size: list.nth($price-level, 2);

    &.is-level-#{$i} {
      --font-size: #{$font-size};
      --strike-font-size: #{$strike-font-size};

      @if $i > 4 {
        .price-details {
          padding-left: 2px;
        }
      }
    }
  }

  .overline {
    width: 100%;
    flex: none;
    margin: 0;
    font-size: calc(var(--font-size) * 0.4);
    font-weight: 400;
  }

  .price {
    font-size: var(--font-size);

    &.strike {
      font-size: var(--strike-font-size);
    }
  }

}

.price {
  display: inline-flex;
  font-weight: initial-variables.$weight-semibold;
  line-height: 0.8;
  margin-bottom: 0;
  font-size: var(--font-size);

  &.strike {
    font-size: var(--strike-font-size);
  }


  @each $price-level in $price-levels {
    $i: list.index($price-levels, $price-level);
    $font-size: list.nth($price-level, 1);
    $strike-font-size: list.nth($price-level, 2);

    &.is-level-#{$i} {
      --font-size: #{$font-size};
      --strike-font-size: #{$strike-font-size};

      @if $i > 4 {
        .price-details {
          padding-left: 2px;
        }
      }
    }
  }


  // the details : cents + period

  .price-details {
    padding-left: spacing.$spacing-1;

    .cents,
    .centimes,
    .periode,
    .period {
      line-height: 1;
      display: block;
    }

    .cents,
    .centimes {
      font-weight: 600;
      font-size: 0.475em;
      vertical-align: top;
      text-align: left;

      sup {
        font-weight: initial-variables.$weight-medium;
        padding-left: 2px;
        top: -0.3em;
      }
    }

    .period,
    .periode {
      font-size: 0.375em;
      margin-top: 0;
      padding-left: 0.1em;
      text-align: left;
    }
  }

  &.is-inverted {
    color: color.getColor('background');
  }

  &.has-description {
    .cents,
    .centimes {
      align-items: flex-start;
      display: flex;
    }

    .icon {
      height: inherit;
      width: inherit;
    }
  }

  &.is-inlined {
    .price-details {
      display: inline-flex;
      margin-left: 0;
      padding-left: 0 !important;

      .cents,
      .centimes,
      .periode,
      .period {
        font-size: inherit;
        line-height: 0.8;
        padding-left: 0;
      }
    }

    &.strike {
      &::before {
        transform: rotate(-12deg);
      }
    }
  }

  &.strike {
    position: relative;
    color: color.getColor('neutral');

    &::before {
      position: absolute;
      content: "";
      left: 0;
      top: 50%;
      right: 0;
      border-top: 2px solid;
      border-color: color.getColor('neutral');
      border-radius: 5px;
      transform: rotate(-20deg);
    }

    &.is-inverted {
      color: color.getColor('background');

      &::before {
        border-color: color.getColor('background');
      }
    }
  }
}
